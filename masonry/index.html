<!doctype html>
<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  <meta name="referrer" content="no-referrer" />
  <title>CSS Houdini 实现自定义瀑布流布局 by 一丝</title>
  <link rel="stylesheet" href="../src/github-fork.css">
  <link rel="stylesheet" href="./index.css">
</head>

<body>
  <h1> <a href="https://drafts.css-houdini.org/css-layout-api/" target="_blank">CSS Houdini</a> 实现自定义瀑布流布局 by 一丝</h1>
  <pre style="font-size: 20px; overflow-x: auto;"><style contenteditable style="display: flex;"
  >  :root { --border: 5px; }
    main {
      display: layout(masonry); /* 自定义布局的名称 */
      --gap: 20px; /* 间距 */
      --columns: 6; /* 默认 auto */
      --column-auto-width: 300px;
      max-width: 70vw;
    }</style></pre>
  <main>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva4.sinaimg.cn/mw1024/90f78f62ly1ffwv0ghbzyj20qo188dm1.jpg" width="960" height="1592" alt=""
        loading="lazy">
    </div>
    <div class="item">
      <div class="tips"></div>
      <div class="sub-item">
        <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/orj360/90f78f62ly1fq3grm5bk7j21sg2dsx6u.jpg" width="360" height="479" alt=""
          loading="lazy"></div>
      <div class="sub-item">
        <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/orj360/90f78f62ly1fq4aqhacgsj20qo0xn12k.jpg" width="360" height="454" alt=""
          loading="lazy"></div>
      <div class="sub-item">
        <img src="https://cdn.cdnjson.com/tva4.sinaimg.cn/mw690/90f78f62ly1fmwpqb6gqjj20qo0zkq8v.jpg" width="690" height="920" alt=""
          loading="lazy"></div>
      <div class="sub-item">
        <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw690/90f78f62ly1fn75g1vkedj20qo140ae4.jpg" width="690" height="1035" alt=""
          loading="lazy"></div>
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw690/90f78f62ly1fm60m27b2gj21410qo7d0.jpg" width="690" height="460" alt=""
        loading="lazy">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/mw690/90f78f62ly1fon2gpm5xfj20qo141jwq.jpg" width="690" height="1036" alt=""
        loading="lazy">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/mw690/90f78f62ly1fmls4xf4w2j21400qoafa.jpg" width="690" height="460" alt=""
        loading="lazy">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw690/90f78f62ly1fm3c63rpq9j20a00dwjsp.jpg" alt="" loading="lazy" width="360"
        height="500">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva3.sinaimg.cn/mw690/90f78f62ly1flvw2e37xhj20qo0zkgpt.jpg" alt="" loading="lazy" width="690"
        height="920">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/mw1024/90f78f62ly1g3tln2nf6yj21i71xinpd.jpg" width="1024" height="1313" alt=""
        loading="lazy">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva3.sinaimg.cn/mw690/90f78f62ly1fkd2l7e6mlj20qo0zktfr.jpg" alt="" loading="lazy" width="690"
        height="920">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva4.sinaimg.cn/mw1024/90f78f62ly1fvqpameuuwj20qo0zi10d.jpg" alt="" loading="lazy" width="960"
        height="1278">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw1024/90f78f62ly1g5rfhykoj3j20u013x1kx.jpg" alt="" loading="lazy" width="1024"
        height="1362">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva4.sinaimg.cn/mw1024/90f78f62ly1g46s82f2xoj20u015wgza.jpg" alt="" loading="lazy" width="1024"
        height="1430">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw1024/90f78f62ly1g2uqftmpzkj20u013xtfn.jpg" alt="" loading="lazy" width="1024"
        height="1362">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw1024/90f78f62ly1g2jxpgb2q2j20v90v9ayv.jpg" alt="" loading="lazy" width="1024"
        height="1024">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva4.sinaimg.cn/mw690/90f78f62ly1fv4k2i1cwfj20qo0w8q8x.jpg" alt="" loading="lazy" width="690"
        height="834">
    </div>
        <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva3.sinaimg.cn/mw690/90f78f62ly1fm3yd7emocj213i0qon73.jpg" alt="" loading="lazy" width="690"
        height="686">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/mw690/90f78f62ly1fv1i38bnpoj20qo0xpdq3.jpg" alt="" loading="lazy" width="690"
        height="872">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva4.sinaimg.cn/mw1024/90f78f62ly1fw5h8oiy57j20qo0vs7c7.jpg" alt="" loading="lazy" width="960"
        height="1144">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva1.sinaimg.cn/mw1024/90f78f62ly1ful78a5p0lj20ku0rrgq1.jpg" alt="" loading="lazy" width="750"
        height="999">
    </div>
    <div class="item">
      <div class="tips"></div>
      <img src="https://cdn.cdnjson.com/tva2.sinaimg.cn/mw1024/90f78f62ly1fr21bdqlnwj215o180dpn.jpg" alt="" loading="lazy" width="1024"
        height="1081">
    </div>
  </main>
  <div class="github-fork-ribbon-wrapper right">
    <div class="github-fork-ribbon">
      <a target="_blank" href="https://github.com/yisibl/houdini-demo">Fork me on GitHub</a>
    </div>
  </div>
  <script>
    if (location.protocol === 'http:' && location.hostname !== 'localhost')
      location.protocol = 'https:';

    if ('layoutWorklet' in CSS) {
      // 可以通过 URL.createObjectURL 实现内联 JS
      CSS.layoutWorklet.addModule('index.js');
    } else {
      document.body.innerHTML = '您的浏览器暂时不支持 <a href="https://drafts.css-houdini.org/css-layout-api/">CSS Layout API</a>，请升级到最新的 Chrome Canary 并开启：chrome://flags/#enable-experimental-web-platform-features';
    }

    // 使自定义属性支持动画
    if ('registerProperty' in CSS) {
      CSS.registerProperty({
        name: '--gap',
        syntax: '<length>',
        initialValue: '0px',
        inherits: false,
      });

      CSS.registerProperty({
        name: '--column-auto-width',
        syntax: '<length>',
        initialValue: '0px',
        inherits: false,
      });

      CSS.registerProperty({
        name: '--columns',
        syntax: '*',
        initialValue: 'auto',
        inherits: false,
      });
    }
  </script>
</body>

</html>
